# ECRM 服装总代理销售报表系统接口文档（第一阶段）

## 1. 用户管理模块

### 1.1 用户注册

- **接口地址**：`/api/user/register`

- **请求方法**：`POST`

- **请求参数**：

  | 参数名   | 类型   | 描述   | 是否必填 |            |
  | -------- | ------ | ------ | -------- | ---------- |
  | username | String | 用户名 | 是       | 5-16位字符 |
  | password | String | 密码   | 是       | 5-16位字符 |
  | email    | String | 邮箱   | 是       |            |
  | phone    | String | 电话   | 是       |            |

- **返回参数**：

  | 参数名  | 类型   | 描述                               |
  | ------- | ------ | ---------------------------------- |
  | code    | Number | 状态码，200 表示成功，其他表示失败 |
  | message | String | 提示信息                           |
  | data    | Object | 返回的数据                         |

### 1.2 用户登录

- **接口地址**：`/api/user/login`

- **请求方法**：`POST`

- **请求参数**：

  | 参数名   | 类型   | 描述   | 是否必填 |
  | -------- | ------ | ------ | -------- |
  | username | String | 用户名 | 是       |
  | password | String | 密码   | 是       |

- **返回参数**：

  | 参数名  | 类型   | 描述                               |
  | ------- | ------ | ---------------------------------- |
  | code    | Number | 状态码，200 表示成功，其他表示失败 |
  | message | String | 提示信息                           |
  | data    | Object | 返回的数据                         |
  | token   | String | JWT Token                          |

### 1.3 权限管理

- **接口地址**：`/api/user/permission`

- **请求方法**：`POST`

- **请求参数**：

  | 参数名 | 类型   | 描述                                    | 是否必填 |
  | ------ | ------ | --------------------------------------- | -------- |
  | userid | String | 用户 ID                                 | 是       |
  | role   | String | 角色，如 'admin', 'sales', 'finance' 等 | 是       |

- **返回参数**：

  | 参数名  | 类型   | 描述                               |
  | ------- | ------ | ---------------------------------- |
  | code    | Number | 状态码，200 表示成功，其他表示失败 |
  | message | String | 提示信息                           |

### 1.4 个人中心 - 修改密码

- **接口地址**：`/api/user/changePassword`

- **请求方法**：`POST`

- **请求参数**：

  | 参数名      | 类型   | 描述    | 是否必填 |
  | ----------- | ------ | ------- | -------- |
  | userId      | String | 用户 ID | 是       |
  | oldPassword | String | 旧密码  | 是       |
  | newPassword | String | 新密码  | 是       |

- **返回参数**：

  | 参数名  | 类型   | 描述                               |
  | ------- | ------ | ---------------------------------- |
  | code    | Number | 状态码，200 表示成功，其他表示失败 |
  | message | String | 提示信息                           |
  | data    | Object | 返回的数据                         |

## 2. 客户管理模块

### 2.1 客户列表（客户录入）

- **接口地址**：`/api/customer/add`

- **请求方法**：`POST`

- **请求参数**：（c_customer_account表）

  | 参数名称             | 类型         | 是否必填 | 默认值 | 描述说明                                                     |
  | -------------------- | ------------ | -------- | ------ | ------------------------------------------------------------ |
  | ID                   | Number(10)   | 非必填   | -      | 记录唯一标识（主键），新增时由系统生成，修改时需传递。       |
  | AD_CLIENT_ID         | Number(10)   | 非必填   | -      | 客户端ID（多租户系统标识，区分不同客户实例）。               |
  | AD_ORG_ID            | Number(10)   | 非必填   | -      | 组织ID（多组织系统标识，区分企业内部不同部门/分公司）。      |
  | C_CAPITAL_ACCOUNT_ID | Number(10)   | 非必填   | -      | 资本账户ID（关联客户资金账户表，记录客户资金账户信息）。     |
  | C_CUSTOMER_ID        | Number(10)   | 非必填   | -      | 客户ID（关联客户主表，核心外键，标记记录归属客户）。         |
  | AMT_ODR_REMAIN       | Number(16,2) | 非必填   | 0      | 订单剩余金额（该订单未支付/未结算的金额）。                  |
  | FEE_ODR_CHECKED      | Number(18,2) | 非必填   | 0      | 订单已审核费用（通过系统审核的订单费用，可用于后续入账）。   |
  | FEEREMAIN            | Number(16,2) | 非必填   | 0      | 剩余费用（客户未支付的总费用，如未结清的服务费/货款）。      |
  | FEECHECKEDIN         | Number(18,2) | 非必填   | 0      | 已审核入账费用（已计入客户账户的审核费用，如已确认的收入）。 |
  | FEERE                | Number(18,2) | 非必填   | 0      | 费用调整（用于记录费用的增减变动，如折扣、补费等）。         |
  | FEEBECANSALE         | Number(18,2) | 非必填   | 0      | 可销售费用（允许用于销售订单的费用额度，如客户预存的可消费金额）。 |
  | FEEBECANTAKE         | Number(18,2) | 非必填   | 0      | 可收取费用（系统允许向客户收取的费用总额，如未超过信用额度的应收款）。 |
  | FEEBESALE            | Number(18,2) | 非必填   | 0      | 已销售费用（已用于销售订单的费用金额，如客户已消费的预存款）。 |
  | FEEBETAKE            | Number(18,2) | 非必填   | 0      | 已收取费用（已成功向客户收取的费用金额，如到账的货款）。     |
  | SHARERATE            | Number(16,2) | 非必填   | 0      | 分成比例（涉及多方分成的业务场景，如渠道分成比例，单位：%）。 |
  | DESCRIPTION          | String(120)  | 非必填   | -      | 记录描述（补充说明，如订单备注、费用说明等）。               |
  | OWNERID              | Number(10)   | 非必填   | -      | 所有者ID（记录归属人，如业务员、部门，用于权限控制）。       |
  | MODIFIERID           | Number(10)   | 非必填   | -      | 修改人ID（最后修改记录的用户ID，用于操作审计）。             |
  | CREATIONDATE         | Date         | 非必填   | -      | 记录创建日期（系统自动生成，格式：`yyyy-MM-dd HH:mm:ss`）。  |
  | MODIFIEDDATE         | Date         | 非必填   | -      | 记录最后修改日期（系统自动更新，格式：`yyyy-MM-dd HH:mm:ss`）。 |
  | ISACTIVE             | String(1)    | 非必填   | 'Y'    | 是否有效（逻辑删除标记，`Y`：有效，`N`：无效）。             |
  | NAME                 | String(160)  | 非必填   | -      | 记录名称（如订单名称、费用项名称，用于快速识别）。           |
  | AMT_ODR_RECEIVABLE   | Number(18,4) | 非必填   | 0      | 订单应收账款（该订单未收回的金额，精确到4位小数）。          |
  | AMT_ODR_RECEIVE      | Number(18,4) | 非必填   | 0      | 订单已收金额（该订单已收回的金额，精确到4位小数）。          |
  | AMT_RECEIVABLE       | Number(18,4) | 非必填   | 0      | 总应收账款（客户所有未收回的金额，精确到4位小数）。          |
  | AMT_RECEIVE          | Number(18,4) | 非必填   | 0      | 总已收金额（客户所有已收回的金额，精确到4位小数）。          |
  | FEE_ODR_CHECKEDIN    | Number(18,2) | 非必填   | 0      | 订单已审核入账费用（该订单已计入账户的审核费用，如订单对应的收入）。 |
  | TQTY                 | Number(18)   | 非必填   | 0      | 总数量（如订单总数量、商品总数量）。                         |
  | TOTY                 | Number(18,4) | 非必填   | 0      | 总金额（如订单总金额、费用总金额，精确到4位小数）。          |
  | TAMTLIST             | Number(18,4) | 非必填   | 0      | 清单总金额（如订单明细清单的总金额，精确到4位小数）。        |
  | TTTIMES              | Number(18)   | 非必填   | 0      | 总次数（如客户消费总次数、订单生成总次数）。                 |
  | TQTYRET              | Number(18)   | 非必填   | 0      | 退货总数量（客户退货的商品总数量）。                         |
  | TAMTRET              | Number(18,4) | 非必填   | 0      | 退货总金额（客户退货的总金额，精确到4位小数）。              |
  | TTIMESRET            | Number(18)   | 非必填   | 0      | 退货总次数（客户退货的总次数）。                             |
  | LASTDATE             | Date         | 非必填   | null   | 最后操作日期（如最后收款日期、最后修改日期，格式：`yyyy-MM-dd HH:mm:ss`）。 |
  | LASTAMOUNT           | Number(18,4) | 非必填   | 0      | 最后金额（如最后一次收款的金额、最后一次调整的费用金额，精确到4位小数）。 |
  | ENTERDATE            | Number(8)    | 非必填   | null   | 录入日期（用8位数字表示，格式：`YYYYMMDD`，如`20250704`表示2025年7月4日）。 |

- **返回参数**：

  | 参数名  | 类型   | 描述                               |
  | ------- | ------ | ---------------------------------- |
  | code    | Number | 状态码，200 表示成功，其他表示失败 |
  | message | String | 提示信息                           |
  | data    | Object | 返回的数据                         |

### 2.2 客户查询

- **接口地址**：`/api/customer/query`

- **请求方法**：`GET`

- **请求参数**：

  | 参数名  | 类型   | 描述                       | 是否必填 |
  | ------- | ------ | -------------------------- | -------- |
  | keyword | String | 查询关键字，如姓名、电话等 | 否       |

- **返回参数**：

  | 参数名  | 类型   | 描述                               |
  | ------- | ------ | ---------------------------------- |
  | code    | Number | 状态码，200 表示成功，其他表示失败 |
  | message | String | 提示信息                           |
  | data    | Array  | 客户列表                           |

### 2.3 客户分类

- **接口地址**：`/api/customer/classify`

- **请求方法**：`POST`

- **请求参数**：

  | 参数名称              | 类型          | 是否必填 | 默认值       | 描述说明                                                     |
  | --------------------- | ------------- | -------- | ------------ | ------------------------------------------------------------ |
  | **ID**                | number        | 非必填   | -            | 组/角色唯一标识（主键）。**说明**：新增时无需传递（系统自动生成）；修改/删除时必须传递。 |
  | **SCHEMA_ID_FK**      | number        | 建议必填 | -            | 所属 Schema ID（关联 schema 表，标记组/角色所属的元数据 schema）。 |
  | **GROUP_NAME**        | string(≤4000) | 必填     | -            | 组/角色名称（唯一标识，如“管理员组”“编辑角色”）。            |
  | **GROUP_FLAG**        | string(≤2)    | 必填     | -            | 组类型标记：- `'R'`：表示角色（Role）；- 其他值（如`'G'`）：表示普通组（Group）。 |
  | **NATIVE_SQL**        | string        | 非必填   | -            | 源系统生成该组/角色的原生 SQL（如创建组的 DDL 语句）。       |
  | **NATIVE_KEY**        | string(≤4000) | 建议必填 | -            | 源系统中的唯一标识（用于同步源系统数据，避免重复导入）。     |
  | **COMMENTS**          | string(≤4000) | 非必填   | -            | 组/角色描述（如“系统管理员组，拥有最高权限”）。              |
  | **SECURITY_GROUP_ID** | number        | 非必填   | 0            | 关联的安全组 ID（默认值`0`表示“无安全组”，需关联安全组表）。 |
  | **CREATED_ON**        | string        | 非必填   | 系统当前时间 | 组/角色创建时间（格式：`yyyy-MM-dd HH:mm:ss`）。**说明**：由系统自动生成，无需手动传递。 |
  | **CREATED_BY**        | string(≤255)  | 非必填   | -            | 组/角色创建人（用户名或标识）。                              |
  | **LAST_UPDATED_ON**   | string        | 非必填   | -            | 组/角色最后更新时间（格式：`yyyy-MM-dd HH:mm:ss`）。**说明**：由系统自动更新，无需手动传递。 |
  | **LAST_UPDATED_BY**   | string(≤255)  | 非必填   | -            | 组/角色最后更新人（用户名或标识）。                          |

- **返回参数**：

  | 参数名  | 类型   | 描述                               |
  | ------- | ------ | ---------------------------------- |
  | code    | Number | 状态码，200 表示成功，其他表示失败 |
  | message | String | 提示信息                           |
  | data    | Object | 返回的数据                         |

### 2.4 客户跟进

- **接口地址**：`/api/customer/followup`

- **请求方法**：`POST`

- **请求参数**：

  | 参数名          | 类型   | 描述     | 是否必填 |
  | --------------- | ------ | -------- | -------- |
  | customerId      | String | 客户 ID  | 是       |
  | followupContent | String | 跟进内容 | 是       |

- **返回参数**：

  | 参数名  | 类型   | 描述                               |
  | ------- | ------ | ---------------------------------- |
  | code    | Number | 状态码，200 表示成功，其他表示失败 |
  | message | String | 提示信息                           |
  | data    | Object | 返回的数据                         |

### 2.5 客户画像

- **接口地址**：`/api/customer/profile`

- **请求方法**：`GET`

- **请求参数**：

  | 参数名     | 类型   | 描述    | 是否必填 |
  | ---------- | ------ | ------- | -------- |
  | customerId | String | 客户 ID | 是       |

- **返回参数**：

  | 参数名  | 类型   | 描述                               |
  | ------- | ------ | ---------------------------------- |
  | code    | Number | 状态码，200 表示成功，其他表示失败 |
  | message | String | 提示信息                           |
  | data    | Object | 客户画像信息                       |